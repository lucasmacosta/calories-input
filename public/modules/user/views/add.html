<section>

  <ci-flash-message></ci-flash-message>

  <div class="col-lg-8 col-md-6 col-sm-6">

    <h2>Add User</h2>

    <ci-server-error error-message="serverError"></ci-server-error>

    <form name="form" role="form" ng-submit="add()" novalidate ci-processing="userData">

      <div class="form-group" ng-class="{'has-error': form.username.$touched && form.username.$invalid}">
        <label for="username">Username</label>
        <input type="text" class="form-control" name="username" id="username" ng-model="user.username" placeholder="Username" required>
        <div ng-show="form.$submitted || form.username.$touched">
          <span ng-show="form.username.$error.required" class="help-block">*This field is required.</span>
        </div>
      </div>

      <div class="form-group" ng-class="{'has-error': form.role.$touched && form.role.$invalid}" ci-restricted-to="['admin']">
        <label for="role">Role</label>
        <select class="form-control" ng-model="user.role" name="role" id="role" ng-options="key as value for (key, value) in roles" required></select>
        <div ng-show="form.$submitted || form.role.$touched">
          <span ng-show="form.role.$error.required" class="help-block">*This field is required.</span>
        </div>
      </div>

      <div class="form-group" ng-class="{'has-error': form.name.$touched && form.name.$invalid}">
        <label for="name">Name</label>
        <input type="text" class="form-control" name="name" id="name" ng-model="user.name" placeholder="Name" required>
        <div ng-show="form.$submitted || form.name.$touched">
          <span ng-show="form.name.$error.required" class="help-block">*This field is required.</span>
        </div>
      </div>

      <div class="form-group" ng-class="{'has-error': form.password.$touched && form.password.$invalid}">
        <label for="password">Password</label>
        <input type="password" class="form-control" name="password" id="password" ng-model="user.password" placeholder="Password" required>
        <div ng-show="form.$submitted || form.password.$touched">
          <span ng-show="form.password.$error.required" class="help-block">*This field is required.</span>
        </div>
      </div>

      <div class="form-group" ng-class="{'has-error': form.passwordConfirmation.$touched && form.passwordConfirmation.$invalid}">
        <label for="passwordConfirmation">Password Confirmation</label>
        <input type="password" class="form-control" name="passwordConfirmation" id="passwordConfirmation" ng-model="user.passwordConfirmation" placeholder="Password Confirmation" required ci-password-confirm="user.password">
        <div ng-show="form.$submitted || form.passwordConfirmation.$touched">
          <span ng-show="form.passwordConfirmation.$error.required" class="help-block">*This field is required.</span>
          <span ng-show="form.passwordConfirmation.$error.passwordConfirm" class="help-block">*Passwords do not match.</span>
        </div>
      </div>

      <div class="form-group" ng-class="{'has-error': form.caloriesPerDay.$touched && form.caloriesPerDay.$invalid}">
        <label for="caloriesPerDay">Calories Per Day</label>
        <input type="number" min="0" class="form-control" name="caloriesPerDay" id="caloriesPerDay" ng-model="user.settings.caloriesPerDay" placeholder="Calories Per Day">
        <div ng-show="form.$submitted || form.caloriesPerDay.$touched">
          <span ng-show="form.caloriesPerDay.$error.min" class="help-block">*Value cannot be negative.</span>
        </div>
      </div>

      <button ng-class="{'disabled': form.$invalid}" type="submit" class="btn btn-default" ng-disabled="form.$invalid">Submit</button>

    </form>

  </div>

</section>
